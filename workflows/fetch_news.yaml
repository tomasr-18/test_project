main:
  steps:
    - call_service_AAPL:
        call: http.post
        args:
          url: "https://fetch-raw-news-app-b3o5cypbia-ew.a.run.app/fetch-news/"
          auth:
            type: OIDC  # Använd OpenID Connect för autentisering
          body:
            company: "AAPL"
          headers:
            Content-Type: "application/json"
        result: service_response_AAPL

    - call_service_GOOGL:
        call: http.post
        args:
          url: "https://fetch-raw-news-app-b3o5cypbia-ew.a.run.app/fetch-news/"
          auth:
            type: OIDC  # Använd OpenID Connect för autentisering
          body:
            company: "GOOGL"
          headers:
            Content-Type: "application/json"
        result: service_response_GOOGL

    - call_service_MSFT:
        call: http.post
        args:
          url: "https://fetch-raw-news-app-b3o5cypbia-ew.a.run.app/fetch-news/"
          auth:
            type: OIDC  # Använd OpenID Connect för autentisering
          body:
            company: "MSFT"
          headers:
            Content-Type: "application/json"
        result: service_response_MSFT

    - call_service_AMZN:
        call: http.post
        args:
          url: "https://fetch-raw-news-app-b3o5cypbia-ew.a.run.app/fetch-news/"
          auth:
            type: OIDC  # Använd OpenID Connect för autentisering
          body:
            company: "AMZN"
          headers:
            Content-Type: "application/json"
        result: service_response_AMZN

    - call_service_TSLA:
        call: http.post
        args:
          url: "https://fetch-raw-news-app-b3o5cypbia-ew.a.run.app/fetch-news/"
          auth:
            type: OIDC  # Använd OpenID Connect för autentisering
          body:
            company: "TSLA"
          headers:
            Content-Type: "application/json"
        result: service_response_TSLA

    - return_result:
        return: "Processing completed for all companies. Responses: AAPL=${service_response_AAPL.body}, GOOGL=${service_response_GOOGL.body}, MSFT=${service_response_MSFT.body}, AMZN=${service_response_AMZN.body}, TSLA=${service_response_TSLA.body}"
